{% extends 'base.html' %}
{% load static %}

{% block title %}Edição do Dia - JC{% endblock %}

{% block content %}
<div class="container" style="padding: 40px 15px; min-height: 60vh;">
    
    <div style="margin-bottom: 40px;">
        <h1 style="font-size: 32px; color: #D9232D; font-weight: 700; text-transform: uppercase; margin-bottom: 10px;">
            EDIÇÃO DO DIA
        </h1>
        
        {% if edicao %}
            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                <span style="font-size: 18px; font-weight: bold; color: #333; border-left: 4px solid #D9232D; padding-left: 10px;">
                    {{ edicao.data_publicacao|date:"d/m/Y" }}
                </span>
            </div>
            <p style="font-size: 16px; color: #666; max-width: 600px;">
                O Jornal do Commercio (JC) traz as últimas notícias sobre política, economia, segurança e muito mais. Acesse a versão digital completa abaixo.
            </p>
        {% else %}
            <p>Nenhuma edição disponível hoje.</p>
        {% endif %}
    </div>

    {% if edicao %}
    <div style="margin-bottom: 10px; font-weight: 700; font-size: 14px; text-transform: uppercase; color: #333;">
        CONFIRA AGORA!
    </div>

    <div style="background-color: #f4f4f4; padding: 30px; border-radius: 8px; display: flex; flex-wrap: wrap; gap: 40px; align-items: center; max-width: 900px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
        
        <div style="flex: 1; min-width: 250px; max-width: 300px;">
            {% if edicao.imagem_capa %}
                <img src="{{ edicao.imagem_capa.url }}" alt="Capa JC" style="width: 100%; border-radius: 4px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
            {% else %}
                <div style="width: 100%; height: 200px; background: #ddd; display: flex; align-items: center; justify-content: center; border-radius: 4px;">Sem Capa</div>
            {% endif %}
        </div>

        <div style="flex: 1; min-width: 250px;">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                <h2 style="font-size: 24px; font-weight: 700; margin: 0;">Edição Digital</h2>
                <img src="{% static 'jornal_commercio/images/logo_jc.png' %}" alt="JC" height="25">
            </div>
            
            <p style="font-size: 18px; color: #555; margin-bottom: 5px;">{{ edicao.data_publicacao|date:"d/m/y" }}</p>
            
            <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 25px; line-height: 1.3;">
                {{ edicao.titulo }}
            </h3>

            <div style="display: flex; flex-direction: column; gap: 15px; width: 100%; max-width: 250px;">
                
                <button id="btn-abrir-leitor" style="background-color: #D9232D; color: white; border: none; padding: 12px 0; border-radius: 50px; font-weight: 700; cursor: pointer; text-transform: uppercase; font-size: 14px; width: 100%; transition: opacity 0.3s;">
                    LEIA AQUI
                </button>

                <button style="background-color: transparent; color: #333; border: 1px solid #333; padding: 12px 0; border-radius: 50px; font-weight: 500; cursor: pointer; font-size: 14px; width: 100%;">
                    Edições Anteriores
                </button>
            </div>
        </div>
    </div>
    {% endif %}
</div>

{% if edicao %}
<div id="leitor-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10000; justify-content: center; align-items: center;">
    
    <button id="fechar-leitor" style="position: absolute; top: 20px; right: 30px; background: none; border: none; color: white; font-size: 40px; cursor: pointer; z-index: 10001;">&times;</button>
    
    <div style="background: white; width: 95%; height: 90%; max-width: 1200px; display: flex; flex-direction: column; border-radius: 8px; overflow: hidden; position: relative;">
        
        <div style="padding: 15px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; background: #fff;">
            <div>
                <h3 style="margin: 0; font-size: 18px; color: #333;">Visualizador JC</h3>
                <span style="font-size: 12px; color: #666;">{{ edicao.data_publicacao|date:"d/m/Y" }}</span>
            </div>
            <img src="{% static 'jornal_commercio/images/logo_jc.png' %}" alt="JC" height="25">
        </div>

        <div style="flex: 1; background: #525659; position: relative;">
            <iframe src="{{ edicao.link_leitura }}" style="width: 100%; height: 100%; border: none;"></iframe>
        </div>
    </div>
</div>

<script>
    const btnAbrir = document.getElementById('btn-abrir-leitor');
    const modal = document.getElementById('leitor-modal');
    const btnFechar = document.getElementById('fechar-leitor');

    if (btnAbrir) {
        btnAbrir.addEventListener('click', function() {
            modal.style.display = 'flex';
        });
    }

    if (btnFechar) {
        btnFechar.addEventListener('click', function() {
            modal.style.display = 'none';
        });
    }

    window.addEventListener('click', function(e) {
        if (e.target === modal) {
            modal.style.display = 'none';
        }
    });
</script>
{% endif %}

{% endblock %}